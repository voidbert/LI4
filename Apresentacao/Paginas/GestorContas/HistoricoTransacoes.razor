@page "/HistoricoTransacoes"

@using System.Globalization
@using LI4.Apresentacao.Componentes

@namespace LI4.Apresentacao.Paginas.GestorContas

<h1>Histórico de Transações</h1>
<table>
    <thead>
        <tr>
            <th>Data/Hora</th>
            <th>Descrição</th>
            <th>Valor</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var transacao in Transacoes)
        {
            <tr>
                <td>@transacao.DataHora.ToString("dd/MM/yyyy - HH:mm")</td>
                <td>@transacao.Descricao</td>
                <td class="@GetValorClass(transacao.Valor)">
                    @transacao.Valor.ToString("C", CultureInfo.CurrentCulture)
                </td>
            </tr>
        }
    </tbody>
</table>
<ActionButton Title="Terminar Sessão"  Callback="TerminarSessao"></ActionButton>

@code {
    private List<Transacao> Transacoes = new List<Transacao>
    {
        new Transacao { DataHora = new DateTime(2024, 8, 28, 12, 0, 0), Descricao = "Entrega da encomenda 923", Valor = 1000.00m },
        new Transacao { DataHora = new DateTime(2024, 8, 29, 15, 30, 0), Descricao = "Entrega da encomenda 912", Valor = 1500.00m },
        new Transacao { DataHora = new DateTime(2024, 8, 30, 17, 0, 0), Descricao = "Entrega da encomenda 915", Valor = 2000.00m },
        new Transacao { DataHora = new DateTime(2024, 8, 31, 17, 35, 0), Descricao = "Devolução da mercadoria 874", Valor = -2000.00m },
        new Transacao { DataHora = new DateTime(2024, 9, 1, 16, 0, 0), Descricao = "Devolução da mercadoria 801", Valor = -1500.00m },
        new Transacao { DataHora = new DateTime(2024, 9, 2, 14, 45, 0), Descricao = "Entrega da encomenda 901", Valor = 1200.00m },
        new Transacao { DataHora = new DateTime(2024, 9, 6, 10, 50, 0), Descricao = "Encerramento de partida 106", Valor = -300.00m },
        new Transacao { DataHora = new DateTime(2024, 9, 6, 8, 30, 0), Descricao = "Encerramento de partida 107", Valor = -1200.00m }
    };

    private string GetValorClass(decimal valor)
    {
        return valor >= 0 ? "valor-positivo" : "valor-negativo";
    }

    private void TerminarSessao()
    {
        // Implementar lógica para terminar sessão
        Console.WriteLine("Sessão terminada.");
    }

    private class Transacao
    {
        public DateTime DataHora { get; set; }
        public string Descricao { get; set; } = string.Empty;
        public decimal Valor { get; set; }
    }
}
